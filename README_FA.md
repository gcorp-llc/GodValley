# ูพูุชูุฑู ฺูุฏ ุณุงุช (ูุณุฎู ุญุฑููโุง) - GodValley

ุงู ูุฎุฒู ุดุงูู ฺฉ ูพูุชูุฑู ุญุฑููโุง ฺูุฏ ุณุงุช ู ฺูุฏ ุณุฑูุณ ุงุณุช ฺฉู ุจุง ุงุณุชูุงุฏู ุงุฒ ุชฺฉููููฺโูุง ูุฏุฑู ูุงููุฏ Rustุ Next.js ู Kubernetes ุทุฑุงุญ ุดุฏู ุงุณุช.

## ๐๏ธ ูุนูุงุฑ ูพุฑูฺู

- **Cargo Workspace**: ูุฏุฑุช ฺฉูพุงุฑฺู ุชูุงู ูฺฉุฑูุณุฑูุณโูุง Rust ู ฺฉุชุงุจุฎุงููโูุง ูุดุชุฑฺฉ.
- **Microservices**: ูุฑ ุณุงุช ุฏุงุฑุง ุฏุงุฑฺฉุชูุฑ `apps/` ุงุฎุชุตุงุต ุจุฑุง ุณุฑูุณโูุง ุจฺฉโุงูุฏ ุงุณุช.
- **Shared Libraries**: ูุงูุน ุฏุฑ `libs/` ุจุฑุง ุนููฺฉุฑุฏูุง ูุดุชุฑฺฉ (ุฏุชุงุจุณุ ุงุจุฒุงุฑูุงุ ูุงฺฏูฺฏ).
- **Frontend**: ุงุณุชูุงุฏู ุงุฒ Next.js (App Router) ุฏุฑ ูพูุดู `web/` ุจุฑุง ูุฑ ุณุงุช.
- **Infrastructure**: ุงุณุชูุงุฏู ุงุฒ Kubernetes (Kustomize) ุจุง Namespaceูุง ูุฌุฒุง ู ุณุณุชู ูุงูุชูุฑูฺฏ.
- **Monitoring**: ุงุฏุบุงู Prometheus ู Grafana ุจุฑุง ูุดุงูุฏู ูุถุนุช ูุฑ ุณุงุช ุจู ุตูุฑุช ูุฌุฒุง.

## ๐ ุณุงุฎุชุงุฑ ูพูุดูโุจูุฏ ู ุณูุฑุณ ฺฉุฏ

ุจุฑุง ูุฏุฑุช ุจูุชุฑ ูพุฑูฺูุ ุณุงุฎุชุงุฑ ุฒุฑ ุฑุนุงุช ุดุฏู ุงุณุช:

- `services/`: ฺฉุฏโูุง ูุฑุจูุท ุจู ูุฑ ุณุงุช ุฏุฑ ุงู ูพูุดู ูุฑุงุฑ ุฏุงุฑุฏ.
  - `<site_name>/apps/`: ูฺฉุฑูุณุฑูุณโูุง ุจฺฉโุงูุฏ (Rust/Actix). **ุณูุฑุณ ุจฺฉโุงูุฏ ุฑุง ุงูุฌุง ุจุฑุฒุฏ.**
  - `<site_name>/web/`: ูุฑุงูุชโุงูุฏ (Next.js). **ุณูุฑุณ ูุฑุงูุชโุงูุฏ ุฑุง ุงูุฌุง ุจุฑุฒุฏ.**
- `libs/`: ฺฉุฑุชโูุง ูุดุชุฑฺฉ Rust ฺฉู ุชูุณุท ููู ุณุฑูุณโูุง ุงุณุชูุงุฏู ูโุดููุฏ.
- `k8s/`: ูุงููุณุชโูุง ฺฉูุจุฑูุชุฒ.
- `docker/`: ูุงูโูุง Docker ูพุงู.
- `local/`: ุชูุธูุงุช ุงุฌุฑุง ูุญู ุจุง Docker Compose.

---

## ๐ณ ุฑุงูููุง ุงุฌุฑุง ุฑู Docker Desktop (ููุฏูุฒ)

1. **ูุตุจ ูพุดโูุงุฒูุง**: Docker Desktop ุฑุง ูุตุจ ฺฉุฑุฏู ู ฺฏุฒูู **WSL2 backend** ุฑุง ูุนุงู ฺฉูุฏ.
2. **ุดุจูโุณุงุฒ ูุฎุฒู**: ูพุดููุงุฏ ูโุดูุฏ ูพุฑูฺู ุฑุง ุฏุงุฎู ูุงูโุณุณุชู WSL2 (ูุซูุงู `/home/username/`) ฺฉููู ฺฉูุฏ ุชุง ุณุฑุนุช ุงุฌุฑุง ุจูุชุฑ ุฏุงุดุชู ุจุงุดุฏ.
3. **ุงุฌุฑุง**: ูุงุฑุฏ ูพูุดู `local` ุดุฏู ู ุฏุณุชูุฑ ุฒุฑ ุฑุง ุงุฌุฑุง ฺฉูุฏ:
   ```bash
   cd local
   docker compose -f docker-compose.dev.yml up --build
   ```
4. **ุฏุณุชุฑุณ**:
   - ุณุงุช GodValley: `http://localhost:3000`
   - ูพูู ุงุฏูู ููููู: `http://localhost:3000/admin`
   - ุงโูพโุข GodValley: `http://localhost:8080`

---

## ๐ณ ุฑุงูููุง ุงุฌุฑุง ุฑู VPS (Ubuntu)

1. **ูุตุจ ุฏุงฺฉุฑ**: ุงุจุชุฏุง Docker ู ูพูุงฺฏู Docker Compose ุฑุง ุฑู ุงูุจููุชู ูุตุจ ฺฉูุฏ:
   ```bash
   sudo apt update
   sudo apt install docker.io docker-compose-v2 -y
   ```
2. **ุชูุธูุงุช ูุญุท**: ูุงู `.env.example` ุฑุง ุจู `.env` ฺฉูพ ฺฉุฑุฏู ู ููุงุฏุฑ ูุงุฒู ุฑุง ุชูุธู ฺฉูุฏ.
3. **ุงุฌุฑุง ุฏุฑ ูพุณโุฒููู**:
   ```bash
   cd local
   docker compose -f docker-compose.dev.yml up -d --build
   ```
4. **ูุงุฑูุงู**: ูพูุฑุชโูุง ููุฑุฏ ูุงุฒ (ูุงููุฏ 3000 ุชุง 3004 ู 8080 ุชุง 8084) ุฑุง ุจุงุฒ ฺฉูุฏ:
   ```bash
   sudo ufw allow 3000:3004/tcp
   sudo ufw allow 8080:8084/tcp
   ```

---

## ๐๏ธ ูุญูู ูุฑุงุด ู ุงุถุงูู ฺฉุฑุฏู ุณุงุช ุฌุฏุฏ

### ุงุถุงูู ฺฉุฑุฏู ุณุงุช ุฌุฏุฏ:
1. ฺฉ ูพูุดู ุฌุฏุฏ ุฏุฑ `services/` ุงุฌุงุฏ ฺฉูุฏ (ูุซูุงู `services/my-new-site`).
2. ุณุงุฎุชุงุฑ `apps/api` ู `web/` ุฑุง ุฏุฑ ุขู ุงุฌุงุฏ ฺฉูุฏ.
3. ูุงู `Cargo.toml` ุงุตู ูพุฑูฺู ุฑุง ุจุงุฒ ฺฉุฑุฏู ู ูุณุฑ ุจฺฉโุงูุฏ ุฌุฏุฏ ุฑุง ุฏุฑ ุจุฎุด `members` ุงุถุงูู ฺฉูุฏ.
4. ูุงู `package.json` ุงุตู ุฑุง ุจุฑุง ุดูุงุณุง ูพุฑูฺู Next.js ุฌุฏุฏ (ุฏุฑ ุตูุฑุช ุงุณุชูุงุฏู ุงุฒ Turborepo) ุจูโุฑูุฒุฑุณุงู ฺฉูุฏ.
5. ุณุฑูุณ ุฌุฏุฏ ุฑุง ุจู `local/docker-compose.dev.yml` ุงุถุงูู ฺฉูุฏ ุชุง ุจุชูุงูุฏ ุขู ุฑุง ุงุฌุฑุง ฺฉูุฏ.

### ูุฑุงุด ฺฉุฏูุง:
- ุจุฑุง ุชุบุฑ ุฏุฑ ููุทู ุจฺฉโุงูุฏุ ฺฉุฏูุง ุฏุงุฎู `services/<site>/apps/` ุฑุง ูุฑุงุด ฺฉูุฏ.
- ุจุฑุง ุชุบุฑ ุฏุฑ ุธุงูุฑ ุณุงุชุ ฺฉุฏูุง `services/<site>/web/` ุฑุง ุชุบุฑ ุฏูุฏ.
- ุจุนุฏ ุงุฒ ูุฑ ุชุบุฑ ุฏุฑ ุฏุงฺฉุฑุ ุฏุณุชูุฑ `up --build` ุฑุง ูุฌุฏุฏุงู ุงุฌุฑุง ฺฉูุฏ.

---

## ๐ ูุฏุฑุช ููุงุจุน ู ฺฏุฒุงุฑุดโฺฏุฑ

- **ุชุฎุตุต ููุงุจุน**: ุฏุฑ ูุญุท ฺฉูุจุฑูุชุฒุ ูุงูโูุง ููุฌูุฏ ุฏุฑ `k8s/base/backend.yaml` ู `frontend.yaml` ุจุฎุด `resources` (requests ู limits) ุฑุง ุจุฑุง ูุฑ ุณุฑูุณ ุชุนู ูโฺฉููุฏ.
- **ูุงูุชูุฑูฺฏ**: ุงุฒ ุทุฑู Grafana (ุจู ุตูุฑุช ูพุดโูุฑุถ ุฑู ูพูุฑุช 3000 ุฏุฑ K8s) ูโุชูุงูุฏ ูุถุนุช ูุตุฑู CPU ู RAM ูุฑ ุณุงุช ุฑุง ูุดุงูุฏู ฺฉูุฏ.
- **ฺฏุฒุงุฑุดโฺฏุฑ ุชุฎุตุต**: ูพููโูุง ุงุฎุชุตุงุต ุฏุฑ ุจุฎุด `/admin` ูุฑ ุณุงุช (ูุงููุฏ ููููู GodValley) ุจุฑุง ููุงุด ุขูุงุฑูุง ุฏุชุงุจุณ ุทุฑุงุญ ูโุดููุฏ.
